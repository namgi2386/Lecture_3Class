<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
  <script>
    // es6
    function fetchData01() {
      console.log("1. 데이터 요청 시작")

      axios.get('https://api.thecatapi.com/v1/images/search')
        .then((response) => {
          // 우리가 보낸 요청이 완료되는 시점
          console.log("2. 요청 완료 :", response.data)
        })
        .catch((error) => {
          console.log("에러 발생 :", error)
        })

      console.log("3. 작업 완료")
    }

    // fetchData01()

    // ES8
    // 동기식으로 처리 되는 것처럼 코드 작성 가능
    // await / async 키워드 사용
    // 비동기 작업 앞부분에 await 키워드 작성
    // await 키워드는 async 키워드로 선언된 함수 안에서만 작성 가능
    async function fetchData02() {
      console.log("1. 데이터 요청 시작")

      // await 키워드를 작성한 곳에서 비동기 작업이 완료될 때까지
      // 실행을 잠시 멈춤
      try {
        const response = await axios.get('https://api.thecatapi.com/v1/images/search')

        console.log("2. 요청 완료 :", response.data)
      } catch (error) {
        console.log("에러 발생 :", error)
      }
    }
    fetchData02()
  </script>
</body>

</html>